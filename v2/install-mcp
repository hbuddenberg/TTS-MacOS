#!/bin/bash

# TTS-MacOS v2 - Quick MCP JSON Generator
# Generates ready-to-use JSON configuration for Claude Desktop

# Colors
BLUE='\033[0;34m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
CYAN='\033[0;36m'
RED='\033[0;31m'
NC='\033[0m' # No Color

echo -e "${BLUE}üîß TTS-MacOS v2 - MCP JSON Generator${NC}"
echo "========================================="

# Get script directory
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"
cd "$SCRIPT_DIR"

# Check if Python script exists
if [ ! -f "generate_mcp_json.py" ]; then
    echo -e "${RED}‚ùå Error: generate_mcp_json.py not found${NC}"
    echo -e "${YELLOW}üí° Please run the main installation first: ./install.sh${NC}"
    exit 1
fi

# Activate virtual environment if available
if [ -d "venv-v2" ] && [ -f "venv-v2/bin/activate" ]; then
    source venv-v2/bin/activate
    echo -e "${GREEN}‚úÖ Virtual environment activated${NC}"
elif [ ! -d "venv-v2" ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  Virtual environment not found, using system Python${NC}"
else
    echo -e "${YELLOW}‚ö†Ô∏è  Virtual environment found but not activated${NC}"
fi

# Run the Python generator
python generate_mcp_json.py --v2 --legacy --pretty "$@"
